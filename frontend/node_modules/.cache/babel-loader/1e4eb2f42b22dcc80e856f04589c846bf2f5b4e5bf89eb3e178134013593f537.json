{"ast":null,"code":"import _slicedToArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Outlet,Link}from\"react-router-dom\";import{useState,useEffect}from\"react\";import axios from\"axios\";import heart from\"../media/icons/heart.png\";import redheart from\"../media/icons/icons8-heart-suit-48.png\";import save from\"../media/icons/save-instagram.png\";import unsave from\"../media/icons/bookmark.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Post(props){var page=\"/posts/\".concat(props.pk);var profilePage=\"/users/\".concat(props.authorpk);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),author=_useState2[0],setAuthor=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),profile=_useState4[0],setProfile=_useState4[1];var loggedin=localStorage.getItem(\"loggedin\");var userid=localStorage.getItem(\"id\");var _useState5=useState(props.likes.includes(String(userid))?redheart:heart),_useState6=_slicedToArray(_useState5,2),likeimg=_useState6[0],setLikeimg=_useState6[1];var _useState7=useState(save),_useState8=_slicedToArray(_useState7,2),saveimg=_useState8[0],setSaveimg=_useState8[1];function getAuthor(pk){axios({method:\"GET\",url:\"/api/users/\".concat(pk)}).then(function(response){setAuthor(response.data);});}useEffect(function(){return getAuthor(props.authorpk);},[props.authorpk]);function likePost(){if(likeimg===heart){setLikeimg(redheart);axios.post(\"/api/posts/\".concat(props.pk,\"/like/\"),{pk:props.pk,user:userid}).then(function(response){return console.log(response.data);});}else{axios.put(\"/api/posts/\".concat(props.pk,\"/like/\"),{pk:props.pk,user:userid}).then(function(response){return console.log(response.data);});setLikeimg(heart);}}function savePost(){if(saveimg===save){setSaveimg(unsave);axios.post(\"/api/posts/\".concat(props.pk,\"/save/\"),{post:props.pk,user:userid}).then(function(response){return console.log(response.data);});}else{axios.put(\"/api/posts/\".concat(props.pk,\"/save/\"),{pk:props.pk,user:userid}).then(function(response){return console.log(response.data);});setSaveimg(save);}}function getProfile(){axios.get(\"/api/profile/\".concat(props.profile)).then(function(response){return setProfile(response.data);});}useEffect(getProfile,[author]);return/*#__PURE__*/_jsxs(\"div\",{style:{height:props.height,width:props.width},className:\"post_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_upper_info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_box_profile\",children:/*#__PURE__*/_jsx(\"img\",{className:\"post_box_profile_img\",src:profile.profile_image,alt:\"none\"})}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{className:\"post_link\",to:profilePage,state:{\"pk\":props.authorpk,\"profile\":Number(author.profile)},children:author.username})}),/*#__PURE__*/_jsx(\"p\",{children:props.pb})]}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(Link,{className:\"post_link\",to:page,state:{pb:props.pb,likes:props.likes,pk:props.pk,publicationDate:props.publicationDate,author:props.authorpk,user:author.username,title:props.title,text:props.text,profile:props.profile,saved:author.postsSaved},children:props.title})}),props.notshowtext?\"\":/*#__PURE__*/_jsx(\"p\",{className:\"post_box_text\",children:props.text})]}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"post_box_functions\",children:[loggedin?/*#__PURE__*/_jsx(\"label\",{htmlFor:\"like\",children:props.likes?props.likes.length:\"\"}):\"\",loggedin?/*#__PURE__*/_jsx(\"input\",{name:\"like\",className:\"postlike\",type:\"image\",src:likeimg,alt:\"\",onClick:likePost}):\"\",loggedin?/*#__PURE__*/_jsx(\"input\",{className:\"postsave\",type:\"image\",src:saveimg,alt:\"\",onClick:savePost}):\"\"]})]});}","map":{"version":3,"names":["Outlet","Link","useState","useEffect","axios","heart","redheart","save","unsave","Post","props","page","concat","pk","profilePage","authorpk","author","setAuthor","profile","setProfile","loggedin","localStorage","getItem","userid","likes","includes","String","likeimg","setLikeimg","saveimg","setSaveimg","getAuthor","method","url","then","response","data","likePost","post","user","console","log","put","savePost","getProfile","get","height","width","profile_image","Number","username","pb","publicationDate","title","text","saved","postsSaved","notshowtext","length"],"sources":["F:/projects/Projects/project/frontend/src/pages/post.js"],"sourcesContent":["import { Outlet, Link } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\"\r\nimport heart from \"../media/icons/heart.png\"\r\nimport redheart from \"../media/icons/icons8-heart-suit-48.png\"\r\nimport save from \"../media/icons/save-instagram.png\"\r\nimport unsave from \"../media/icons/bookmark.png\"\r\nexport default function Post(props) {\r\n    const page = \"/posts/\".concat(props.pk)\r\n    const profilePage = \"/users/\".concat(props.authorpk)\r\n    const [author, setAuthor] = useState({})\r\n    const [profile, setProfile] = useState(\"\")\r\n\r\n    const loggedin = localStorage.getItem(\"loggedin\")\r\n    const userid = localStorage.getItem(\"id\")\r\n    const [likeimg, setLikeimg] = useState(props.likes.includes(String(userid)) ? redheart : heart)\r\n\r\n    const [saveimg, setSaveimg] = useState(save)\r\n    function getAuthor(pk) {\r\n        axios({\r\n            method: \"GET\",\r\n            url: \"/api/users/\".concat(pk)\r\n        }).then((response) => {\r\n            setAuthor(response.data)\r\n        })\r\n\r\n    }\r\n    useEffect(() => getAuthor(props.authorpk), [props.authorpk])\r\n    function likePost() {\r\n        if (likeimg === heart) {\r\n            setLikeimg(redheart)\r\n            axios.post(`/api/posts/${props.pk}/like/`, { pk: props.pk, user: userid }).then(response => console.log(response.data))\r\n        }\r\n        else {\r\n            axios.put(`/api/posts/${props.pk}/like/`, { pk: props.pk, user: userid }).then(response => console.log(response.data))\r\n            setLikeimg(heart)\r\n        }\r\n    }\r\n\r\n    function savePost() {\r\n        if (saveimg === save) {\r\n            setSaveimg(unsave)\r\n            axios.post(`/api/posts/${props.pk}/save/`, { post: props.pk, user: userid }).then(response => console.log(response.data))\r\n\r\n\r\n        }\r\n        else {\r\n            axios.put(`/api/posts/${props.pk}/save/`, { pk: props.pk, user: userid }).then(response => console.log(response.data))\r\n            setSaveimg(save)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function getProfile() {\r\n        axios.get(`/api/profile/${props.profile}`).then(response => setProfile(response.data))\r\n    }\r\n    useEffect(getProfile, [author])\r\n    return (\r\n        <div style={{ height: props.height, width: props.width }} className=\"post_box\">\r\n            <div className=\"post_info\">\r\n                <div className=\"post_upper_info\">\r\n                    <div className=\"post_box_profile\">\r\n                        <img className=\"post_box_profile_img\" src={profile.profile_image} alt=\"none\" />\r\n                    </div>\r\n                    <h3><Link className=\"post_link\" to={profilePage} state={{ \"pk\": props.authorpk, \"profile\": Number(author.profile) }}  >{author.username}</Link></h3>\r\n                    <p>{props.pb}</p>\r\n                </div>\r\n                <h2><Link className=\"post_link\" to={page} state={{ pb: props.pb, likes: props.likes, pk: props.pk, publicationDate: props.publicationDate, author: props.authorpk, user: author.username, title: props.title, text: props.text, profile: props.profile, saved: author.postsSaved }}>{props.title}</Link></h2>\r\n                {props.notshowtext ? \"\" : <p className=\"post_box_text\">{props.text}</p>}\r\n            </div>\r\n            <Outlet />\r\n            <div className=\"post_box_functions\">\r\n                {loggedin ? <label htmlFor=\"like\">{props.likes ? props.likes.length : \"\"}</label> : \"\"}\r\n                {loggedin ? <input name=\"like\" className=\"postlike\" type={\"image\"} src={likeimg} alt=\"\" onClick={likePost} /> : \"\"}\r\n                {loggedin ? <input className=\"postsave\" type={\"image\"} src={saveimg} alt=\"\" onClick={savePost} /> : \"\"}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}