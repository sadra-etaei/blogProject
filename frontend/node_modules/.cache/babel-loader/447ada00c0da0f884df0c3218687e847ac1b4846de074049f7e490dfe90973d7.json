{"ast":null,"code":"import _slicedToArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useLocation,useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import axios from\"axios\";import heart from\"../media/icons/heart.png\";import redheart from\"../media/icons/icons8-heart-suit-48.png\";import save from\"../media/icons/save-instagram.png\";import unsave from\"../media/icons/bookmark.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostPage(){var loggedin=localStorage.getItem(\"loggedin\");var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var userid=localStorage.getItem(\"id\");var loc=useLocation();var _useState3=useState(loc.state.likes.includes(String(userid))?redheart:heart),_useState4=_slicedToArray(_useState3,2),likeimg=_useState4[0],setLikeimg=_useState4[1];console.log(loc.state);var _useState5=useState(loc.state.saved.includes(String(loc.state.pk))?unsave:save),_useState6=_slicedToArray(_useState5,2),saveimg=_useState6[0],setSaveimg=_useState6[1];function getProfile(){axios.get(\"/api/profile/\".concat(loc.state.profile)).then(function(response){return setProfile(response.data);});}useEffect(getProfile,[userid]);function deletePost(){axios.delete(\"/api/posts/\".concat(loc.state.pk)).then(function(response){return console.log(response);}).catch(function(error){return console.log(error.response.data);}).then(navigate(\"/\"));}function publishPost(){axios.post(\"/api/posts/\".concat(loc.state.pk,\"/publish/\"),{pk:loc.state.pk}).then(navigate(\"/home\"));}function likePost(){if(likeimg===heart){setLikeimg(redheart);axios.post(\"/api/posts/\".concat(loc.state.pk,\"/like/\"),{pk:loc.state.pk,user:userid}).then(function(response){return console.log(response.data);});}else{axios.put(\"/api/posts/\".concat(loc.state.pk,\"/like/\"),{pk:loc.state.pk,user:userid}).then(function(response){return console.log(response.data);});setLikeimg(heart);}}function updatePost(){navigate(\"/update/\".concat(loc.state.pk),{state:loc.state});}function savePost(){if(saveimg===save){setSaveimg(unsave);axios.post(\"/api/posts/\".concat(loc.state.pk,\"/save/\"),{post:loc.state.pk,user:userid}).then(function(response){return console.log(response.data);});}else{axios.put(\"/api/posts/\".concat(loc.state.pk,\"/save/\"),{pk:loc.state.pk,user:userid}).then(function(response){return console.log(response.data);});setSaveimg(save);}}var status=\"\";if(loc.state.author==userid){status=true;}else{status=false;}return/*#__PURE__*/_jsxs(\"div\",{className:\"postPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_page_info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_profile\",children:/*#__PURE__*/_jsx(\"img\",{id:\"post_profile_img\",src:profile.profile_image,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post_page_details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:loc.state.user}),/*#__PURE__*/_jsx(\"p\",{children:loc.state.pb})]})]}),/*#__PURE__*/_jsx(\"h1\",{children:loc.state.title}),/*#__PURE__*/_jsx(\"p\",{className:\"post_page_text\",children:loc.state.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"postPage_buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:loc.state.likes?loc.state.likes.length:\"\"}),loggedin?/*#__PURE__*/_jsx(\"input\",{className:\"postlike\",type:\"image\",src:likeimg,alt:\"\",onClick:likePost}):\"\",loggedin?/*#__PURE__*/_jsx(\"input\",{className:\"postsave\",type:\"image\",src:saveimg,alt:\"\",onClick:savePost}):\"\"]}),status?/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:updatePost,children:\"update this post \"}):\"\",status?/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:deletePost,children:\"delete this post \"}):\"\",loc.state.pb?\"\":/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:publishPost,children:\"publish this post\"})]})]});}","map":{"version":3,"names":["useLocation","useNavigate","useEffect","useState","axios","heart","redheart","save","unsave","PostPage","loggedin","localStorage","getItem","navigate","profile","setProfile","userid","loc","state","likes","includes","String","likeimg","setLikeimg","console","log","saved","pk","saveimg","setSaveimg","getProfile","get","then","response","data","deletePost","delete","catch","error","publishPost","post","likePost","user","put","updatePost","savePost","status","author","profile_image","pb","title","text","length"],"sources":["F:/projects/Projects/project/frontend/src/pages/postPage.js"],"sourcesContent":["import { useLocation, useNavigate } from \"react-router-dom\"\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport heart from \"../media/icons/heart.png\"\r\nimport redheart from \"../media/icons/icons8-heart-suit-48.png\"\r\nimport save from \"../media/icons/save-instagram.png\"\r\nimport unsave from \"../media/icons/bookmark.png\"\r\nexport default function PostPage() {\r\n    const loggedin = localStorage.getItem(\"loggedin\")\r\n    const navigate = useNavigate()\r\n    const [profile, setProfile] = useState(\"\")\r\n\r\n    const userid = localStorage.getItem(\"id\")\r\n    const loc = useLocation()\r\n    const [likeimg, setLikeimg] = useState(loc.state.likes.includes(String(userid)) ? redheart : heart)\r\n\r\n    console.log(loc.state)\r\n    const [saveimg, setSaveimg] = useState(loc.state.saved.includes(String(loc.state.pk)) ? unsave : save)\r\n    function getProfile() {\r\n        axios.get(`/api/profile/${loc.state.profile}`).then(response => setProfile(response.data))\r\n    }\r\n    useEffect(getProfile, [userid])\r\n    function deletePost() {\r\n        axios.delete(`/api/posts/${loc.state.pk}`).then(response => console.log(response))\r\n            .catch(error => console.log(error.response.data)).then(navigate(\"/\"))\r\n    }\r\n    function publishPost() {\r\n        axios.post(`/api/posts/${loc.state.pk}/publish/`, { pk: loc.state.pk }).then(navigate(\"/home\"))\r\n\r\n    }\r\n    function likePost() {\r\n        if (likeimg === heart) {\r\n            setLikeimg(redheart)\r\n            axios.post(`/api/posts/${loc.state.pk}/like/`, { pk: loc.state.pk, user: userid }).then(response => console.log(response.data))\r\n        }\r\n        else {\r\n            axios.put(`/api/posts/${loc.state.pk}/like/`, { pk: loc.state.pk, user: userid }).then(response => console.log(response.data))\r\n            setLikeimg(heart)\r\n        }\r\n    }\r\n\r\n    function updatePost() {\r\n        navigate(`/update/${loc.state.pk}`, { state: loc.state })\r\n    }\r\n\r\n    function savePost() {\r\n        if (saveimg === save) {\r\n            setSaveimg(unsave)\r\n            axios.post(`/api/posts/${loc.state.pk}/save/`, { post: loc.state.pk, user: userid }).then(response => console.log(response.data))\r\n\r\n\r\n        }\r\n        else {\r\n            axios.put(`/api/posts/${loc.state.pk}/save/`, { pk: loc.state.pk, user: userid }).then(response => console.log(response.data))\r\n            setSaveimg(save)\r\n        }\r\n    }\r\n    var status = \"\"\r\n    if (loc.state.author == userid) {\r\n        status = true\r\n    }\r\n    else {\r\n        status = false\r\n    }\r\n\r\n    return (\r\n        <div className=\"postPage\">\r\n            <div className=\"post_page_info\">\r\n                <div className=\"post_profile\" >\r\n                    <img id=\"post_profile_img\" src={profile.profile_image} alt=\"\" />\r\n                </div>\r\n                <div className=\"post_page_details\">\r\n                    <h3>{loc.state.user}</h3>\r\n                    <p>{loc.state.pb}</p>\r\n                </div>\r\n            </div>\r\n            <h1>{loc.state.title}</h1>\r\n            <p className=\"post_page_text\">{loc.state.text}</p>\r\n            <div className=\"postPage_buttons\">\r\n                <div>\r\n                    <label>{loc.state.likes ? loc.state.likes.length : \"\"}</label>\r\n                    {loggedin ? <input className=\"postlike\" type={\"image\"} src={likeimg} alt=\"\" onClick={likePost} /> : \"\"}\r\n                    {loggedin ? <input className=\"postsave\" type={\"image\"} src={saveimg} alt=\"\" onClick={savePost} /> : \"\"}\r\n                </div>\r\n                {status ? <button className=\"button\" onClick={updatePost}>update this post </button> : \"\"}\r\n                {status ? <button className=\"button\" onClick={deletePost}>delete this post </button> : \"\"}\r\n                {loc.state.pb ? \"\" : <button className=\"button\" onClick={publishPost}>publish this post</button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}