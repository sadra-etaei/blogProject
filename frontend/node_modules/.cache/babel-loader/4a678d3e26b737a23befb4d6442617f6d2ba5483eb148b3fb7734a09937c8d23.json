{"ast":null,"code":"var _jsxFileName = \"F:\\\\projects\\\\Projects\\\\project\\\\frontend\\\\src\\\\pages\\\\login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const nav = useNavigate();\n  const [form, setForm] = useState({});\n  const [error, setError] = useState([]);\n  function onChange(event) {\n    // validateForm()\n    if (event.target.name === \"username\") {\n      setForm(prev => {\n        return {\n          ...prev,\n          username: event.target.value\n        };\n      });\n    }\n    if (event.target.name === \"pass\") {\n      setForm(prev => {\n        return {\n          ...prev,\n          password: event.target.value\n        };\n      });\n    }\n  }\n  function validateForm() {\n    if (form.username == null) {\n      setError([\"please fill out the blanks\"]);\n    } else if (form.password == null) {\n      setError([\"please fill out the blanks\"]);\n    } else if (form.username.length < 4 & form.username.length > 0) {\n      setError(prev => {\n        if (error.includes(\"usernames should be more than 4 characters\") === false) {\n          return [...prev, \"usernames should be more than 4 characters\"];\n        } else {\n          return [...prev];\n        }\n      });\n      // setError(\"username should be more then 4 characters\")\n    } else {\n      setError(\"\");\n    }\n    return error;\n  }\n  var error_messages = \"\";\n  if (error != \"\") {\n    error_messages = error.map(e => /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"error_message\",\n      children: e\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 41\n    }, this));\n  }\n  function Login(e) {\n    e.preventDefault();\n    axios.defaults.xsrfCookieName = 'csrftoken';\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    if (validateForm() == \"\") {\n      axios.post(\"api/login/\", JSON.stringify(form), {\n        \"headers\": {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        localStorage.setItem(\"loggedin\", \"true\");\n        localStorage.setItem(\"username\", response.data.username);\n        localStorage.setItem(\"email\", response.data.email);\n        localStorage.setItem(\"id\", response.data.id);\n        localStorage.setItem(\"profile\", response.data.profile);\n        localStorage.setItem('following', response.data.following);\n        localStorage.setItem('saved', response.data.saved);\n        console.log(response.data);\n        nav(`/profile/${response.data.id}`, {\n          state: response.data.id\n        });\n      }).catch(err => console.log(err));\n      console.log(form);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"loginform\",\n      className: \"registration_formbox\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: Login,\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registration_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Username :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"forminput\",\n            onChange: onChange,\n            type: \"text\",\n            name: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registration_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pass\",\n            children: \"Password :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"forminput\",\n            onChange: onChange,\n            type: \"text\",\n            name: \"pass\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: error_messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"loginbtn\",\n            className: \"button\",\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"n4PJRNn02rSz8/5kOU6zzWG7F4A=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","axios","useNavigate","Login","nav","form","setForm","error","setError","onChange","event","target","name","prev","username","value","password","validateForm","length","includes","error_messages","map","e","preventDefault","defaults","xsrfCookieName","xsrfHeaderName","post","JSON","stringify","then","response","localStorage","setItem","data","email","id","profile","following","saved","console","log","state","catch","err"],"sources":["F:/projects/Projects/project/frontend/src/pages/login.js"],"sourcesContent":["import { useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nexport default function Login() {\r\n    const nav = useNavigate()\r\n    const [form, setForm] = useState({})\r\n    const [error, setError] = useState([])\r\n\r\n    function onChange(event) {\r\n        // validateForm()\r\n        if (event.target.name === \"username\") {\r\n            setForm(prev => { return { ...prev, username: event.target.value } })\r\n        }\r\n        if (event.target.name === \"pass\") {\r\n            setForm(prev => { return { ...prev, password: event.target.value } })\r\n        }\r\n    }\r\n    function validateForm() {\r\n\r\n        if (form.username == null) {\r\n            setError([\"please fill out the blanks\"])\r\n        }\r\n        else if (form.password == null) {\r\n            setError([\"please fill out the blanks\"])\r\n\r\n        }\r\n        else if (form.username.length < 4 & form.username.length > 0) {\r\n            setError(prev => {\r\n                if (error.includes(\"usernames should be more than 4 characters\") === false) {\r\n                    return [...prev, \"usernames should be more than 4 characters\"]\r\n                }\r\n                else {\r\n                    return [...prev]\r\n                }\r\n            })\r\n            // setError(\"username should be more then 4 characters\")\r\n\r\n        }\r\n        else {\r\n            setError(\"\")\r\n        }\r\n        return error\r\n    }\r\n\r\n    var error_messages = \"\"\r\n    if (error != \"\") {\r\n        error_messages = error.map(e => <p id=\"error_message\">{e}</p>)\r\n    }\r\n    function Login(e) {\r\n        e.preventDefault()\r\n        axios.defaults.xsrfCookieName = 'csrftoken'\r\n        axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\"\r\n        if (validateForm() == \"\") {\r\n            axios.post(\"api/login/\", JSON.stringify(form), {\r\n                \"headers\": {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            }).then(response => {\r\n                localStorage.setItem(\"loggedin\", \"true\")\r\n                localStorage.setItem(\"username\", response.data.username)\r\n                localStorage.setItem(\"email\", response.data.email)\r\n                localStorage.setItem(\"id\", response.data.id)\r\n                localStorage.setItem(\"profile\", response.data.profile)\r\n                localStorage.setItem('following', response.data.following)\r\n                localStorage.setItem('saved',response.data.saved)\r\n\r\n                console.log(response.data)\r\n                nav(`/profile/${response.data.id}`, { state: response.data.id })\r\n            }\r\n            ).catch(err => console.log(err))\r\n            console.log(form)\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <div id=\"loginform\" className=\"registration_formbox\">\r\n                <h1>Login</h1>\r\n                <form onSubmit={Login} method=\"post\">\r\n                    <div className=\"registration_field\">\r\n                        <label htmlFor=\"username\" >Username :</label>\r\n                        <input className=\"forminput\" onChange={onChange} type={\"text\"} name=\"username\" />\r\n                    </div>\r\n                    <div className=\"registration_field\">\r\n                        <label htmlFor=\"pass\" >Password :</label>\r\n                        <input className=\"forminput\" onChange={onChange} type={\"text\"} name=\"pass\" />\r\n                    </div>\r\n                    <div>\r\n                        {error_messages}\r\n                    </div>\r\n                    <div>\r\n                        <button id=\"loginbtn\" className=\"button\" type=\"submit\" >Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}