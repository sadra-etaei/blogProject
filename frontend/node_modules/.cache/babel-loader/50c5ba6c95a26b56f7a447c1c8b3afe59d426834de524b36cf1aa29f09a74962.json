{"ast":null,"code":"import _toConsumableArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var nav=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];function onChange(event){// validateForm()\nif(event.target.name===\"username\"){setForm(function(prev){return _objectSpread(_objectSpread({},prev),{},{username:event.target.value});});}if(event.target.name===\"pass\"){setForm(function(prev){return _objectSpread(_objectSpread({},prev),{},{password:event.target.value});});}}function validateForm(){if(form.username==null){setError([\"please fill out the blanks\"]);}else if(form.password==null){setError([\"please fill out the blanks\"]);}else if(form.username.length<4&form.username.length>0){setError(function(prev){if(error.includes(\"usernames should be more than 4 characters\")===false){return[].concat(_toConsumableArray(prev),[\"usernames should be more than 4 characters\"]);}else{return _toConsumableArray(prev);}});// setError(\"username should be more then 4 characters\")\n}else{setError(\"\");}return error;}var error_messages=\"\";if(error!=\"\"){error_messages=error.map(function(e){return/*#__PURE__*/_jsx(\"p\",{id:\"error_message\",children:e});});}function Login(e){e.preventDefault();axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName=\"X-CSRFTOKEN\";if(validateForm()==\"\"){axios.post(\"api/login/\",JSON.stringify(form),{\"headers\":{'Content-Type':'application/json'}}).then(function(response){localStorage.setItem(\"loggedin\",\"true\");localStorage.setItem(\"username\",response.data.username);localStorage.setItem(\"email\",response.data.email);localStorage.setItem(\"id\",response.data.id);localStorage.setItem(\"profile\",response.data.profile);localStorage.setItem('following',response.data.following);localStorage.setItem('saved',response.data.saved);console.log(response.data);nav(\"/profile/\".concat(response.data.id),{state:response.data.id});}).catch(function(err){return console.log(err);});console.log(form);}}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{id:\"loginform\",className:\"registration_formbox\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:Login,method:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"registration_field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username :\"}),/*#__PURE__*/_jsx(\"input\",{className:\"forminput\",onChange:onChange,type:\"text\",name:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"registration_field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pass\",children:\"Password :\"}),/*#__PURE__*/_jsx(\"input\",{className:\"forminput\",onChange:onChange,type:\"text\",name:\"pass\"})]}),/*#__PURE__*/_jsx(\"div\",{children:error_messages}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"loginbtn\",className:\"button\",type:\"submit\",children:\"Login\"})})]})]})});}","map":{"version":3,"names":["useState","axios","useNavigate","Login","nav","form","setForm","error","setError","onChange","event","target","name","prev","username","value","password","validateForm","length","includes","error_messages","map","e","preventDefault","defaults","xsrfCookieName","xsrfHeaderName","post","JSON","stringify","then","response","localStorage","setItem","data","email","id","profile","following","saved","console","log","state","catch","err"],"sources":["F:/projects/Projects/project/frontend/src/pages/login.js"],"sourcesContent":["import { useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nexport default function Login() {\r\n    const nav = useNavigate()\r\n    const [form, setForm] = useState({})\r\n    const [error, setError] = useState([])\r\n\r\n    function onChange(event) {\r\n        // validateForm()\r\n        if (event.target.name === \"username\") {\r\n            setForm(prev => { return { ...prev, username: event.target.value } })\r\n        }\r\n        if (event.target.name === \"pass\") {\r\n            setForm(prev => { return { ...prev, password: event.target.value } })\r\n        }\r\n    }\r\n    function validateForm() {\r\n\r\n        if (form.username == null) {\r\n            setError([\"please fill out the blanks\"])\r\n        }\r\n        else if (form.password == null) {\r\n            setError([\"please fill out the blanks\"])\r\n\r\n        }\r\n        else if (form.username.length < 4 & form.username.length > 0) {\r\n            setError(prev => {\r\n                if (error.includes(\"usernames should be more than 4 characters\") === false) {\r\n                    return [...prev, \"usernames should be more than 4 characters\"]\r\n                }\r\n                else {\r\n                    return [...prev]\r\n                }\r\n            })\r\n            // setError(\"username should be more then 4 characters\")\r\n\r\n        }\r\n        else {\r\n            setError(\"\")\r\n        }\r\n        return error\r\n    }\r\n\r\n    var error_messages = \"\"\r\n    if (error != \"\") {\r\n        error_messages = error.map(e => <p id=\"error_message\">{e}</p>)\r\n    }\r\n    function Login(e) {\r\n        e.preventDefault()\r\n        axios.defaults.xsrfCookieName = 'csrftoken'\r\n        axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\"\r\n        if (validateForm() == \"\") {\r\n            axios.post(\"api/login/\", JSON.stringify(form), {\r\n                \"headers\": {\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            }).then(response => {\r\n                localStorage.setItem(\"loggedin\", \"true\")\r\n                localStorage.setItem(\"username\", response.data.username)\r\n                localStorage.setItem(\"email\", response.data.email)\r\n                localStorage.setItem(\"id\", response.data.id)\r\n                localStorage.setItem(\"profile\", response.data.profile)\r\n                localStorage.setItem('following', response.data.following)\r\n                localStorage.setItem('saved',response.data.saved)\r\n\r\n                console.log(response.data)\r\n                nav(`/profile/${response.data.id}`, { state: response.data.id })\r\n            }\r\n            ).catch(err => console.log(err))\r\n            console.log(form)\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <div id=\"loginform\" className=\"registration_formbox\">\r\n                <h1>Login</h1>\r\n                <form onSubmit={Login} method=\"post\">\r\n                    <div className=\"registration_field\">\r\n                        <label htmlFor=\"username\" >Username :</label>\r\n                        <input className=\"forminput\" onChange={onChange} type={\"text\"} name=\"username\" />\r\n                    </div>\r\n                    <div className=\"registration_field\">\r\n                        <label htmlFor=\"pass\" >Password :</label>\r\n                        <input className=\"forminput\" onChange={onChange} type={\"text\"} name=\"pass\" />\r\n                    </div>\r\n                    <div>\r\n                        {error_messages}\r\n                    </div>\r\n                    <div>\r\n                        <button id=\"loginbtn\" className=\"button\" type=\"submit\" >Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}