{"ast":null,"code":"import _slicedToArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useLocation}from\"react-router-dom\";import{useState,useEffect}from\"react\";import Post from\"./post\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfile(){var location=useLocation();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),profile=_useState6[0],setProfile=_useState6[1];var postlist=[];var currentuser=localStorage.getItem(\"id\");function getUser(){axios({method:\"GET\",url:'/api/users/'.concat(location.state.pk)}).then(function(response){return setUser(response.data);});axios.get(\"/api/profile/\".concat(location.state.profile)).then(function(response){return setProfile(response.data);});}function getPosts(){axios({method:\"get\",url:\"/api/profile/posts/\".concat(location.state.pk,\"/\")}).then(function(response){return setPosts(response.data);});}function follow(e){if(e.target.value==\"Follow\"){e.target.value=\"unfollow\";axios.post(\"/api/users/\".concat(location.state.pk,\"/follow/\"),{following:currentuser,followed:user.pk});}else{e.target.value=\"Follow\";axios.put(\"/api/users/\".concat(location.state.pk,\"/follow/\"),{following:currentuser,followed:user.pk});}}var elements=posts.map(function(post){return/*#__PURE__*/_jsx(Post,{likes:post.likes,profile:post.profile,pb:post.publicationDate,pk:post.pk,title:post.title,authorpk:post.author,author:user.username,text:post.text});});for(var i=0;i<elements.length;i++){if(i++%2===0){postlist.push(/*#__PURE__*/_jsxs(\"div\",{className:\"profile_post_line\",children:[elements[i],\" \",elements[i-1],\" \"]}));}}var status=true;useEffect(getUser,[location.state.pk,location.state.profile]);useEffect(getPosts,[location.state.pk]);if(currentuser==location.state.pk){status=false;}return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile_page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"personal_info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile_image\",children:profile.profile_image?/*#__PURE__*/_jsx(\"img\",{className:\"profile\",src:profile.profile_image,alt:\"\"}):\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_email_box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:user.username}),/*#__PURE__*/_jsx(\"h2\",{children:user.email})]}),/*#__PURE__*/_jsx(\"p\",{children:profile.bio})]}),/*#__PURE__*/_jsx(\"div\",{id:\"user_profile_functions\",className:\"profile_functions\",children:status?/*#__PURE__*/_jsx(\"input\",{type:\"button\",value:\"Follow\",className:\"button\",onClick:follow}):\"\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_posts\",children:postlist})]})});}","map":{"version":3,"names":["useLocation","useState","useEffect","Post","axios","UserProfile","location","user","setUser","posts","setPosts","profile","setProfile","postlist","currentuser","localStorage","getItem","getUser","method","url","concat","state","pk","then","response","data","get","getPosts","follow","e","target","value","post","following","followed","put","elements","map","likes","publicationDate","title","author","username","text","i","length","push","status","profile_image","email","bio"],"sources":["F:/projects/Projects/project/frontend/src/pages/userProfile.js"],"sourcesContent":["import { useLocation } from \"react-router-dom\"\r\nimport { useState, useEffect } from \"react\"\r\nimport Post from \"./post\"\r\nimport axios from \"axios\"\r\nexport default function UserProfile() {\r\n    const location = useLocation()\r\n    const [user, setUser] = useState({})\r\n    const [posts, setPosts] = useState([])\r\n    const [profile, setProfile] = useState(\"\")\r\n    const postlist = []\r\n    const currentuser = localStorage.getItem(\"id\")\r\n    function getUser() {\r\n        axios({\r\n            method: \"GET\",\r\n            url: '/api/users/'.concat(location.state.pk)\r\n        }).then(response => setUser(response.data))\r\n\r\n        axios.get(`/api/profile/${location.state.profile}`).then(response => setProfile(response.data))\r\n    }\r\n\r\n    function getPosts() {\r\n        axios(\r\n            {\r\n                method: \"get\",\r\n                url: `/api/profile/posts/${location.state.pk}/`\r\n            }\r\n        ).then(response => setPosts(response.data))\r\n    }\r\n    function follow(e) {\r\n        if (e.target.value == \"Follow\") {\r\n            e.target.value = \"unfollow\"\r\n            axios.post(`/api/users/${location.state.pk}/follow/`, { following: currentuser, followed: user.pk })\r\n\r\n        }\r\n        else{\r\n            e.target.value = \"Follow\"\r\n            axios.put(`/api/users/${location.state.pk}/follow/`, { following: currentuser, followed: user.pk })\r\n\r\n\r\n        }\r\n    }\r\n    const elements = posts.map(post => <Post likes={post.likes} profile={post.profile} pb={post.publicationDate} pk={post.pk} title={post.title} authorpk={post.author} author={user.username} text={post.text} />)\r\n    for (let i = 0; i < elements.length; i++) {\r\n        if (i++ % 2 === 0) {\r\n            postlist.push(<div className=\"profile_post_line\">{elements[i]} {elements[i - 1]} </div>)\r\n        }\r\n\r\n    }\r\n    var status = true\r\n    useEffect(getUser, [location.state.pk, location.state.profile])\r\n    useEffect(getPosts, [location.state.pk])\r\n    if (currentuser == location.state.pk) {\r\n        status = false\r\n    }\r\n    return (\r\n        <main>\r\n            <div className=\"profile_page\">\r\n                <div className=\"personal_info\">\r\n                    <div className=\"profile_image\">\r\n                        {profile.profile_image ? <img className=\"profile\" src={profile.profile_image} alt=\"\" /> : \"\"}\r\n                    </div>\r\n                    <div className=\"info\">\r\n                        <div className=\"profile_email_box\">\r\n                            <h1>{user.username}</h1>\r\n                            <h2>{user.email}</h2>\r\n                        </div>\r\n                        <p>{profile.bio}</p>\r\n                    </div>\r\n                    <div id=\"user_profile_functions\" className=\"profile_functions\">\r\n                        {status ? <input type=\"button\" value={\"Follow\"} className=\"button\" onClick={follow} /> : \"\"}\r\n                    </div>\r\n                </div>\r\n                <div className=\"profile_posts\">\r\n                    {postlist}\r\n                </div>\r\n\r\n            </div>\r\n        </main>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}