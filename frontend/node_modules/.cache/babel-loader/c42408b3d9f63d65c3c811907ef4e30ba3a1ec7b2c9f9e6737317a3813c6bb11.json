{"ast":null,"code":"import _objectSpread from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"F:/projects/Projects/project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Outlet,Link}from\"react-router-dom\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Create(){var nav=useNavigate();var user=localStorage.getItem(\"username\");var userid=localStorage.getItem(\"id\");var profileid=localStorage.getItem(\"profile\");var _useState=useState({text:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];function handleChange(event){setForm(function(prevForm){return _objectSpread(_objectSpread({},prevForm),{},{authorAvatar:profileid});});setForm(function(prevForm){return _objectSpread(_objectSpread({},prevForm),{},{author:userid});});if(event.target.name===\"title\"){setForm(function(prevForm){return _objectSpread(_objectSpread({},prevForm),{},{title:event.target.value});});}if(event.target.name===\"textarea\"){setForm(function(prevForm){return _objectSpread(_objectSpread({},prevForm),{},{text:event.target.value});});}}function postForm(event){event.preventDefault();axios.post('/api/post/create',JSON.stringify(form),{\"headers\":{'Content-Type':'application/json'}}).then(function(response){return nav(\"/posts/\".concat(response.data.pk),{state:_objectSpread(_objectSpread({},response.data),{},{user:user})});});console.log(form);}return/*#__PURE__*/_jsx(\"div\",{children:user?/*#__PURE__*/_jsx(\"div\",{onSubmit:postForm,className:\"postform-box\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"postform\",method:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title_in_class\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"title\",children:\"Title : \"}),/*#__PURE__*/_jsx(\"input\",{name:\"title\",type:\"text\",id:\"titleinput\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{name:\"textarea\",id:\"textarea\",onChange:handleChange})}),/*#__PURE__*/_jsx(\"input\",{id:\"postsubmit\",className:\"button\",type:\"submit\",value:\"Submit\"})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"you have to login first\"})});}","map":{"version":3,"names":["useState","useEffect","Outlet","Link","axios","useNavigate","Create","nav","user","localStorage","getItem","userid","profileid","text","form","setForm","handleChange","event","prevForm","authorAvatar","author","target","name","title","value","postForm","preventDefault","post","JSON","stringify","then","response","data","pk","state","console","log"],"sources":["F:/projects/Projects/project/frontend/src/pages/create.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\r\nimport { Outlet, Link } from \"react-router-dom\";\r\nimport axios from \"axios\"\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nexport default function Create() {\r\n    const nav = useNavigate()\r\n\r\n    const user = localStorage.getItem(\"username\")\r\n    const userid = localStorage.getItem(\"id\")\r\n    const profileid = localStorage.getItem(\"profile\")\r\n    const [form, setForm] = useState({ text: \"\" })\r\n    function handleChange(event) {\r\n        setForm(prevForm => { return { ...prevForm, authorAvatar: profileid } })\r\n        setForm(prevForm => { return { ...prevForm, author: userid } })\r\n        if (event.target.name === \"title\") {\r\n            setForm(prevForm => { return { ...prevForm, title: event.target.value } })\r\n        }\r\n        if (event.target.name === \"textarea\") {\r\n            setForm(prevForm => { return { ...prevForm, text: event.target.value } })\r\n        }\r\n    }\r\n    function postForm(event) {\r\n        event.preventDefault()\r\n        axios.post('/api/post/create', JSON.stringify(form), {\r\n            \"headers\": {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => nav(`/posts/${response.data.pk}`, { state: { ...response.data, user: user } }))\r\n        console.log(form)\r\n    }\r\n    return (\r\n        <div>\r\n            {user ? <div onSubmit={postForm} className=\"postform-box\">\r\n                <form className=\"postform\" method=\"POST\">\r\n                    <div className=\"title_in_class\">\r\n                        <label for=\"title\" >Title : </label>\r\n                        <input name=\"title\" type={\"text\"} id=\"titleinput\" onChange={handleChange} />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <textarea name=\"textarea\" id=\"textarea\" onChange={handleChange} />\r\n                    </div>\r\n                    <input id=\"postsubmit\" className=\"button\" type={\"submit\"} value=\"Submit\" />\r\n                </form>\r\n            </div> : <p>you have to login first</p>}\r\n\r\n        </div>\r\n    )\r\n}"],"mappings":"qPAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,MAAM,CAAEC,IAAI,KAAQ,kBAAkB,CAC/C,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAG/C,cAAe,SAASC,OAAM,EAAG,CAC7B,GAAMC,IAAG,CAAGF,WAAW,EAAE,CAEzB,GAAMG,KAAI,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC7C,GAAMC,OAAM,CAAGF,YAAY,CAACC,OAAO,CAAC,IAAI,CAAC,CACzC,GAAME,UAAS,CAAGH,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CACjD,cAAwBV,QAAQ,CAAC,CAAEa,IAAI,CAAE,EAAG,CAAC,CAAC,wCAAvCC,IAAI,eAAEC,OAAO,eACpB,QAASC,aAAY,CAACC,KAAK,CAAE,CACzBF,OAAO,CAAC,SAAAG,QAAQ,CAAI,CAAE,sCAAYA,QAAQ,MAAEC,YAAY,CAAEP,SAAS,GAAG,CAAC,CAAC,CACxEG,OAAO,CAAC,SAAAG,QAAQ,CAAI,CAAE,sCAAYA,QAAQ,MAAEE,MAAM,CAAET,MAAM,GAAG,CAAC,CAAC,CAC/D,GAAIM,KAAK,CAACI,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC/BP,OAAO,CAAC,SAAAG,QAAQ,CAAI,CAAE,sCAAYA,QAAQ,MAAEK,KAAK,CAAEN,KAAK,CAACI,MAAM,CAACG,KAAK,GAAG,CAAC,CAAC,CAC9E,CACA,GAAIP,KAAK,CAACI,MAAM,CAACC,IAAI,GAAK,UAAU,CAAE,CAClCP,OAAO,CAAC,SAAAG,QAAQ,CAAI,CAAE,sCAAYA,QAAQ,MAAEL,IAAI,CAAEI,KAAK,CAACI,MAAM,CAACG,KAAK,GAAG,CAAC,CAAC,CAC7E,CACJ,CACA,QAASC,SAAQ,CAACR,KAAK,CAAE,CACrBA,KAAK,CAACS,cAAc,EAAE,CACtBtB,KAAK,CAACuB,IAAI,CAAC,kBAAkB,CAAEC,IAAI,CAACC,SAAS,CAACf,IAAI,CAAC,CAAE,CACjD,SAAS,CAAE,CACP,cAAc,CAAE,kBACpB,CACJ,CAAC,CAAC,CACGgB,IAAI,CAAC,SAAAC,QAAQ,QAAIxB,IAAG,kBAAWwB,QAAQ,CAACC,IAAI,CAACC,EAAE,EAAI,CAAEC,KAAK,gCAAOH,QAAQ,CAACC,IAAI,MAAExB,IAAI,CAAEA,IAAI,EAAG,CAAC,CAAC,GAAC,CACrG2B,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC,CACrB,CACA,mBACI,qBACKN,IAAI,cAAG,YAAK,QAAQ,CAAEiB,QAAS,CAAC,SAAS,CAAC,cAAc,uBACrD,cAAM,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,wBACpC,aAAK,SAAS,CAAC,gBAAgB,wBAC3B,cAAO,GAAG,CAAC,OAAO,sBAAkB,cACpC,cAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,MAAO,CAAC,EAAE,CAAC,YAAY,CAAC,QAAQ,CAAET,YAAa,EAAG,GAC1E,cAEN,kCACI,iBAAU,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAEA,YAAa,EAAG,EAChE,cACN,cAAO,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAE,QAAS,CAAC,KAAK,CAAC,QAAQ,EAAG,GACxE,EACL,cAAG,8CAA8B,EAErC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}